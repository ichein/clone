<!-- el index xd -->

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/x2js/1.2.0/xml2json.min.js"></script>
    <title>text to json</title>
</head>
<body>
    <div id="navigationBar">
        <!-- la barra de navegacion, en este lugar se colocara en un futuro-->
    </div>
    <div id="title">
        <h1>convertidor de documentos a json</h1>
        <h3>ingresa el texto o sube el documento que deses convertir a json</h3>
    </div>
    <div id="messagepopap">
        <!-- mesaje para mostrar errores o avisos-->
        <div id="messageConteiner">
            <p id="messageText">aqui aprecera el mesaje</p>
            <button id="closeMessage" onclick="closeMessage()"> cerrar</button>
        </div>
    </div>
    <div id="messageConfirmacion">
        <!-- mensaje para pedir confirmacion de entendimiento de la informacion -->
        <div id="confirmationConteiner">
            <p id="confirmationText">aqui va la informacion a confirmar</p>
            <div id="confirmationButtons">
                <button id="acceptConfirmation" onclick="convert()">continuar</button>
                <button id="cancelConfirmation" onclick="closeConfirmation()">regresar</button>
            </div>
        </div>
    </div>
    <div id="igresarDatos">
        <!-- advertencias sobre el uso y suvida de datos -->
        <div id="tableWarning">
            <strong>⚠ Recomendaciones:</strong>
            <ul>
                <li> El archivo se guarda en tu navegador, por lo que si recargas o cierras la paina tu informacion y los resultados se perderan</li>
                <li>La <b>primera fila</b> se usa como encabezado y debe coincidir con las claves definidas en la estructura del JSON.</li>
                <li>Los nombres en la primera fila <b>deben coincidir exactamente</b> (respetar mayúsculas y minúsculas).</li>
                <li>Si no subes un archivo, puedes usar la tabla editable para ingresar los datos manualmente.</li>
                <li>El campo <b>id</b> es opcional</li>
                <li>El campo <b>id</b> debe ser único para cada fila.</li>
                <li> si el campo <b>id</b> no especifica se generara de manera automatica en el JSON</li>
            </ul>
        </div>
        <!-- botones de control -->
        <div id="tableControls">
            <button id="addRow" onclick="addRow()" >añadir fila</button>
            <button id="addColumn" onclick="addColumn()">añadir columna</button>
            <button id="removeRow" onclick="removeRow()">eliminar fila</button>
            <button id="removeColumn" onclick="removeColumn()">eliminar columna</button>
            <button id="clearTable" onclick="clearTable()">limpiar tabla</button>
        </div>
        <!-- crar tabla nativa para convertir a json -->
        <table id="dataTable" border="1" >
            <thead class="headTable">
                <tr>
                    <th  contenteditable="true">id</th>
                    <th  contenteditable="true">clave</th>
                    <th  contenteditable="true" >clave</th>
                </tr>
            </thead>
            <tbody class="bodyTable">
                <tr>
                    <td contenteditable="true">1</td>
                    <td contenteditable="true">valor</td>
                    <td contenteditable="true">valor</td>
                </tr>
                <tr>
                    <td contenteditable="true">2</td>
                    <td contenteditable="true">valor</td>
                    <td contenteditable="true">valor</td>
                </tr>
                <tr>
                    <td contenteditable="true">3</td>
                    <td contenteditable="true">valor</td>
                    <td contenteditable="true">valor</td>
                </tr>
            </tbody>
        </table>
        <!-- importar archivos del tipo hoja de calculo para convercion a json -->
        <div id="importfile">
            <h2>importar archivo</h2>
            <input type="file" id="fileInput" accept=".xlsx, .xls, .csv" onchange="upLoadFile(event)">
        </div>
    </div>
    <div id="chooseJsonElements">
        <!-- Sección de encabezado global -->
        <h2>Encabezado global</h2>
        <div id="headerFields">
            <div class="headerField">
                <input class="clave" type="text" value="titulo" placeholder="clave">
                <input type="text" value="titulo de ejemplo" placeholder="valor">
                <button class="removeField" onclick="removeFieldToHeader()">eliminar</button>
            </div>
            <div class="headerField">
                <input class="clave" value="author" placeholder="clave">
                <input type="text" value="pepito666" placeholder="valor">
                <button class="removeField" onclick="removeFieldToHeader()">eliminar</button>
            </div>
            <button id="addHeaderField" onclick="addFieldToHeader()">añadir campo</button>
        </div>
        <hr>
        <!-- Sección de estructura del json -->
        <h2>estructura del Json</h2>
        <div id="jsonStructure">
            <div class="jsonField">
                <input type="text" value="id" placeholder="clave" readonly class="clave">
                <input type="text" placeholder="valor" readonly>
            </div>
            <div class="jsonField">
                <input type="text" value="clave" placeholder="clave">
                <input type="text" value="valor" placeholder="valor"readonly>
                <button class="removeStructureField" onclick="removeFieldToStructure()">eliminar</button>
            </div>
            <div class="jsonField">
                <input type="text" value="clave" placeholder="clave">
                <input type="text"  value="valor" placeholder="valor"readonly>
                <button class="removeStructureField" onclick="removeFieldToStructure()">eliminar</button>
            </div>
            <button id="addJsonField" onclick="addFieldToStructure()">añadir campo</button>
        </div>
    </div><br><hr><br>
    <div id="jsonResult">
    <button id="convertToJson" onclick="confirmation()">Convertir a Json</button>
    <button id="showJsonOutput" onclick="showJsonOutput()">Mostrar JSON generado</button>
        <h2>Resultado en JSON</h2>
        <textarea  id="jsonOutput" rows="10" cols="50" readonly>aqui aprecera tu JSON</textarea><br>
        <button id="copyJson" onclick="copyJson()">Copiar Json</button>
        <button id="downLoadJson" onclick="downLoadJson()">Descargar JSON</button>
    </div>
    <div id="controlButtons">
        <button id="reset" onclick="reset()">reiniciar todo</button>
        <button id="clear" onclick="clearAll()">limpiar todo</button>
    </div>
</body>
<footer>
</footer>
<script src="convert.js"></script>
</html>
